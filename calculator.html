<HTML>
    <head>
        <link rel="stylesheet" href="CalculatorStyle.css">
        <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
        <script src="https://www.cellcast.com.au/client/views/besma/assets/js/jquery.min.js"></script>
        <script src="https://www.cellcast.com.au/client/views/besma/assets/js/bootstrap/dist/js/bootstrap.min.js"></script>
    </head>
 
    <body>
        <div class="pricing_section__container">
            <div>
                <div class = "pricing_heading"> SMS pricing </div>
                <div class = "pricing_info">
                    Tell us how many messages you'd like to send and we'll suggest which bundle is best for you. Don't worry if you have some credits left over - it'll never expire!
                </div>
            </div>
            <div class = "pricing_section">
                <div class="pricing-section-item-one-container">

                    <div class = "pricing-section-item-one-container-buttons">
                        <button class="sms-button active">SMS</button>
                        <button class="mms-button">MMS</button>
                    </div>

                    <div class="sms-wrapper">
                        <label>How many SMS are you sending?</label>
                        <br>
                        <div class = "pricing-selection-container">
                            <div class = "specify-others">
                            <input type="number" maxlength="8" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" id="unitCount" />
                            </div>
                            <div class = "container-with">with</div>
                            <div class="option">
                                <div class="select">
                                <select name="industry" id="industry" class="sms-option-selectors">
                                    <option disabled>Select a plan</option>
                                    <option value="dedicated">Dedicated Number</option>
                                    <option value="alpha">Alpha Id</option>
                                    <option value="shared" selected>Shared Number</option>
                                </select>
                                </div>
                            </div>
                        </div>
                        <p class = "price-bottom-item-one-heading">SMS Price</p>
                        <p class = "price-bottom-item-one-description">Cost for sending <span class="sent-amount">1</span> SMS with a shared number. See recommended bundle ></p>
                        <div class = "price-bottom-contianer">
                            <div class ="price-bottom-item-one">
                                <p class = "price-display">$<span class="sms-total-price">0.015</span></p>
                            </div>
                            <div class ="price-bottom-item-two">
                                <p>or 0.034/message<span class="sent-amount"></span> </p>
                            </div>
                        </div>                 
                    </div>
                    <div class="mms-wrapper hidden">
                        <label>How many MMS are you sending?</label>
                        <br>
                        <div class = "pricing-selection-container">
                            <div class = "specify-others">
                            <input type="number" maxlength="8" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" id="unitCount" />
                            </div>
                            <div class = "container-with">with</div>
                            <div class="option">
                                <div class="select">
                                <select name="industry" id="industry" class="mms-option-selectors">
                                    <option disabled>Select a plan</option>
                                    <option value="dedicated">Dedicated Number</option>
                                    <option value="alpha">Alpha Id</option>
                                    <option value="shared" selected>Shared Number</option>
                                </select>
                                </div>
                            </div>
                        </div>
                        <p class="price-bottom-item-one-heading">MMS Price</p>
                        <p class = "price-bottom-item-one-description">Cost for sending <span class="sent-amount-mms">1</span> MMS with a shared number. See recommended bundle ></p>
                        <div class = "price-bottom-contianer">
                            <div class = "price-bottom-item-one">
                                <p class = "price-display">$<span class="mms-total-price">0.01</span></p>
                            </div>
                            <div class ="price-bottom-item-two">
                                <p>or 0.10/message<span class="sent-amount"></span> </p>
                            </div>
                        </div>                    
                    </div>
                    
                </div> 
                <div class="pricing-section-item-two-container">
                    <div class="check-one">
                         <img src = "checkMark.svg" class="svg-circle-check"/>
                         <p>FREE credits when you join</p>
                    </div>
                    <hr class="hr-container-two"> 
                    <div class="check-two"> 
                        <img src = "checkMark.svg" class="svg-circle-check"/> 
                        <p>Credits never expire</p>
                    </div> 
                    <hr class="hr-container-two">
                    <div class="check-three"> 
                        <img src = "checkMark.svg" class="svg-circle-check-last"/> 
                        <p>Virtual numbers and Alpha ID available</p>
                    </div> 
                </div> 
            </div>  
        </div>
    </body>

    <!--Jquery/Js-->
    <script>

        "use strict";

        const unitInputs = document.querySelectorAll("#unitCount");
        const mmsButton = document.querySelector(".mms-button");
        const smsButton = document.querySelector(".sms-button");
        const smsContainer = document.querySelector(".sms-wrapper");
        const mmsContainer = document.querySelector(".mms-wrapper");
        const smsOptionSelector = document.querySelector(".sms-option-selectors");
        const mmsOptionSelector = document.querySelector(".mms-option-selectors");

        let smsMultiplier = 0.034;
        let mmsMultiplier = 0.01;

        let units = 1;

        smsOptionSelector.addEventListener("change", function(e) {
            const priceContainer = document.querySelector('.price-bottom-contianer');

            if(e.target.value === 'dedicated') {
                console.log(units);
                smsMultiplier = 0.029;
                let element = document.querySelector('.price-bottom-item-two');
                if (typeof(element) != 'undefined' && element != null)
                {
                    element.remove();
                }
                const html = `
                <div class ="price-bottom-item-two">
                    <p>or 0.029/message + $18.00/mo for VN</p>
                </div>
                `
                priceContainer.insertAdjacentHTML('beforeend', html);
                if(!units) return;
                const totalPrice = (units * smsMultiplier).toFixed(3);
                document.querySelector('.sms-total-price').innerText = totalPrice;
            } else if(e.target.value === 'alpha') {
                console.log(units);
                smsMultiplier = 0.029;
                let element = document.querySelector('.price-bottom-item-two');
                if (typeof(element) != 'undefined' && element != null)
                {
                    element.remove();
                }
                const html = `
                <div class ="price-bottom-item-two">
                    <p>or 0.029/message</p>
                </div>
                `
                priceContainer.insertAdjacentHTML('beforeend', html);
                if(!units) return;
                const totalPrice = (units * smsMultiplier).toFixed(3);
                document.querySelector('.sms-total-price').innerText = totalPrice;
            } else if(e.target.value === 'shared') {
                smsMultiplier = 0.34;
                console.log(units);
                let element = document.querySelector('.price-bottom-item-two');
                if (typeof(element) != 'undefined' && element != null)
                {
                    element.remove();
                }
                const html = `
                <div class ="price-bottom-item-two">
                    <p>or 0.34/message</p>
                </div>
                `
                priceContainer.insertAdjacentHTML('beforeend', html);
                if(!units) return;
                const totalPrice = (units * smsMultiplier).toFixed(3);
                document.querySelector('.sms-total-price').innerText = totalPrice;
            }
        })

        // TODO: MMS Rate calculation
        // mmsOptionSelector.addEventListener("change", function(e) {
        //     if(e.target.value === 'dedicated') {

        //     } else if(e.target.value === 'alpha') {

        //     } else if(e.target.value === 'shared') {
                
        //     }
        // })

        unitInputs.forEach( input => {
            input.value = 1;
            document.querySelector('.sms-total-price').innerText = (input.value * smsMultiplier).toFixed(3);
            document.querySelector('.mms-total-price').innerText = (input.value * mmsMultiplier).toFixed(3);
        })

        const smsInput = unitInputs[0];
        smsInput.addEventListener('input', function(e) {
            units = Number(e.target.value);
            const totalPrice = (units * smsMultiplier).toFixed(3);
            document.querySelector('.sms-total-price').innerText = totalPrice;
            // updateSelectedAmmount(units);
        })

        const mmsInput = unitInputs[1];
        mmsInput.addEventListener('input', function(e) {
            units = Number(e.target.value);
            const totalPrice = (units * mmsMultiplier).toFixed(3);
            document.querySelector('.mms-total-price').innerText = totalPrice;
            // updateSelectedAmmount(units);
        })

        const sentSMSAmount = unitInputs[0];
        sentSMSAmount.addEventListener('input', function(e) {
            units = Number(e.target.value);
            const totalSMSAmount = units;
            document.querySelector('.sent-amount').innerText = totalSMSAmount;
            // updateSelectedAmmount(units);
        })

        const sentMMSAmount = unitInputs[1];
        sentMMSAmount.addEventListener('input', function(e) {
            units = Number(e.target.value);
            const totalMMSAmount = units;
            document.querySelector('.sent-amount-mms').innerText = totalMMSAmount;
            // updateSelectedAmmount(units);
        })


        mmsButton.addEventListener('click', function() {
            mmsContainer.classList.remove('hidden');
            smsContainer.classList.add('hidden');
            mmsButton.classList.add('active');
            smsButton.classList.remove('active');

            mmsInput.value = smsInput.value;
            const totalPrice = (Number(unitInputs[1].value) * mmsMultiplier).toFixed(3);
            document.querySelector('.mms-total-price').innerText = totalPrice;
            console.log(smsInput.value, document.querySelector('.sent-amount'))
            document.querySelector('.sent-amount-mms').innerText = smsInput.value;

        })

        smsButton.addEventListener('click', function() {
            mmsContainer.classList.add('hidden');
            smsContainer.classList.remove('hidden');
            smsButton.classList.add('active');
            mmsButton.classList.remove('active');
            
            smsInput.value = mmsInput.value;
            const totalPrice =  (Number(unitInputs[0].value) * smsMultiplier).toFixed(3)
            document.querySelector('.sms-total-price').innerText = totalPrice;
            document.querySelector('.sent-amount').innerText = smsInput.value;
        })

        const updateSelectedAmmount = (units) => {
            const unitsSelection =  document.querySelector(".sent-amount");
            unitsSelection.innerText = units;
        };

    </script>
</HTML>